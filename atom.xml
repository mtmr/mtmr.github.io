<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[muthu raj]]></title>
  <link href="http://mtmr.github.io/atom.xml" rel="self"/>
  <link href="http://mtmr.github.io/"/>
  <updated>2015-01-11T21:54:11+05:30</updated>
  <id>http://mtmr.github.io/</id>
  <author>
    <name><![CDATA[Muthu Raj]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Understanding the commands used in OS lab]]></title>
    <link href="http://mtmr.github.io/blog/2015/01/11/understanding-the-commands-used-in-lab/"/>
    <updated>2015-01-11T15:45:42+05:30</updated>
    <id>http://mtmr.github.io/blog/2015/01/11/understanding-the-commands-used-in-lab</id>
    <content type="html"><![CDATA[<p>According to me, mastering the shell scripting required for our lab (or anywhere for that matter) involves <del>three</del> four things..</p>

<ol>
<li><p>Quoting</p></li>
<li><p>Command substitution and File name expansion</p></li>
<li><p>Regular expressions</p></li>
<li><p>Knowledge of commandline utilities</p></li>
</ol>


<!-- more -->


<h2>Quoting</h2>

<p>We already covered quoting in class. In a nutshell, When you want all special meaning for all characters turned off(i.e., when you want to print $1500 using instead of having the shell interpreting it as an attempt to access the value of a variable 1500) you use single quotes. When you
want certain special meanings (<code>`</code>,<code>\\</code>, <code>$</code>) to be preserved, you use double quotes.</p>

<figure class='code'><figcaption><span>Quoting</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">name</span><span class="o">=</span><span class="s1">&#39;muthu&#39;</span>
</span><span class='line'><span class="c">#note the single quotes and spacing. Double quotes work too.</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;$name&quot;</span>
</span><span class='line'><span class="c">#Prints out muthu. Retains special meaning of $</span>
</span><span class='line'><span class="nb">echo</span> <span class="s1">&#39;$name&#39;</span>
</span><span class='line'><span class="c">#Prints out $name.</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Command Substitution and filename globbing</h2>

<p>Command susbstitution refers to substituting the standard output of a command to a variable. File name globbing is nothing but expanding filenames using special charcters like <code>*</code>.</p>

<figure class='code'><figcaption><span>Command Substitution and File name globbing</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">name</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$muthu</span><span class="sb">`</span>
</span><span class='line'><span class="c">#Backquotes(`) are used to assign the output of a command to a variable a.k.a Command substitution</span>
</span><span class='line'><span class="nv">name</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;muthu&quot;</span><span class="k">)</span>
</span><span class='line'><span class="c">#Another method for command substitution.</span>
</span><span class='line'>ls *.zip
</span><span class='line'><span class="c">#Lists all files with the zip extension. (Recall Wildcards)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Knowledge of commandline utilities</h2>

<p>It is unfair to expect everyone to know all the available command line utilites especially when they are not using it on a daily basis. However <code>apropos</code> can be of much help.</p>

<h2>Regular Expressions</h2>

<p>Regular expressions is not a topic I can explain in a single post. Note that the topic in itself is not so complicated. <strong><em>I</em></strong> do not know it enough to explain so easily. However, I will concentrate on explaining the commands and programs we used in last lab session. (First five will be covered in this post)
Sed is a text stream manipulator. It can read through a text file line by line and perform modifications and print them to standard output. And it uses regular expressions to search through the text. The general syntax for the most widely used substitution command of sed is this</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sed -n <span class="s1">&#39;s/something/somethingelse/[p][g]&#39;</span> filename
</span></code></pre></td></tr></table></div></figure>


<p>
The sed is the command name while <code>-n</code> option asks the utility to suppress normal output and print only what is specified. (The stuff that follows) <code>s</code> means we want the tool to <em>substitute</em> the <code>something</code> into <code>somethingelse</code> and the last two optional flags(marked by the presence of square brackets around them) tell that we want the result to be printed and the we want the expression to be applied globally (By default, only the first something is replaced by somethingelse).</p>

<figure class='code'><figcaption><span>Sed basics</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">echo</span> <span class="s2">&quot;muthu&quot;</span> <span class="p">|</span> sed -n <span class="s1">&#39;s/muthu/muthuraj/p&#39;</span>
</span><span class='line'><span class="c">#the above command replaces muthu by muthuraj</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;muthu&quot;</span> <span class="p">|</span> sed -n <span class="s1">&#39;s/\([a-z][a-z]*\)/&amp;raj/p&#39;</span>
</span><span class='line'><span class="c">#the above command does the same but uses regular expressions.</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Sed command to delete first character of each line in a file</h2>

<p>(We&rsquo;ll assume that there is a file called sample.txt in your current ditrectory)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sed <span class="s1">&#39;s/^.//&#39;</span> sample.txt
</span></code></pre></td></tr></table></div></figure>


<p>Note: <code>/</code> is a seperator between the action, search for pattern and the replacement pattern.</p>

<p>The above command is split as follows:</p>

<p><code>s</code> - substitute</p>

<p><code>^.</code> - <code>^</code> Denotes the beginning of a line. It is what we call an anchor character. <code>.</code> asks the tool to match exactly one character no matter what kind of character</p>

<p><code>//</code> - Nothing between the slashes denotes we replace a single charcter with nothing, thereby &ldquo;deleting&rdquo; that character</p>

<h2>Sed command to delete the last character of each line in a file</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sed <span class="s1">&#39;s/.$//&#39;</span> sample.txt
</span></code></pre></td></tr></table></div></figure>


<p><code>s</code>- substitute</p>

<p><code>.$</code> - <code>$</code> Denotes the end of a line. <code>.</code> matches exactly one character no matter what kind of character</p>

<p><code>//</code>- Nothing between the slashes denotes we replace a single charcter with nothing, thereby &ldquo;deleting&rdquo; that character</p>

<h2>Sed Command to swap two words </h2>

<figure class='code'><figcaption><span>Sed to swap two words</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sed <span class="s1">&#39;s/\([a-z][a-z]*\) /\([a-z][a-z]*\) /\2 \1/&#39;</span> sample.txt
</span></code></pre></td></tr></table></div></figure>


<p>Here, it gets a little more complicated.</p>

<p>The <code>\(</code>after the first <code>/</code>denotes that we want to use a open bracket to group the pattern. We use the <code>\</code> to turn on a special meaning for the <code>( </code>. (It is complicated. We&rsquo;ll come back to that another day&hellip;..) Same goes for <code>\)</code>.</p>

<p>Now that we have eliminated the escaped Brackets, We&rsquo;ll come to the patterns, between the slashes.</p>

<p><code>[a-z]</code> denotes that we have to match any chracter in the range a-z. Repeating that a second time with a <code>*</code> suffixed and results in selecting a single letter word at the minimum. <code>*</code> denotes the tool will select the pattern preceding it zero or more times. If we include the pattern [a-z] and suffix it with a <code>*</code> it will match nothing too(Read the previous line about <code>*</code> again) zero or more times. The second set selects another word.</p>

<p><code>/\2 \1/ </code> swaps the first and second words ans separates them by a space.</p>

<p>Note: Above version does not work for words with uppercase letters or with symbols like ASK or won&rsquo;t.</p>

<h2>Pipe you /etc/passwd to awk and print it</h2>

<figure class='code'><figcaption><span>AWK</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>cat /etc/passwd <span class="p">|</span> awk <span class="s2">&quot;{print $7}&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>cat</code> prints everything in the file to standard output. You pipe it to awk using <code>|</code> and ask awk to print the seventh column by saying <code>"{ print $7}"</code>.</p>

<h2>Develop an interactive grep script that asks for a word and a file name and then tells how many lines contain that word</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#! /bin/bash</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Enter the word:&quot;</span>
</span><span class='line'><span class="nb">read </span>word
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Enter the file name:&quot;</span>
</span><span class='line'><span class="nb">read </span>file
</span><span class='line'>grep -c <span class="nv">$word</span> <span class="nv">$file</span>
</span><span class='line'><span class="nb">exit </span>0
</span></code></pre></td></tr></table></div></figure>


<p>Nothing to explain here.</p>

<p>I will continue the next post as soon as I get a chance. Comment below if you have any doubts. Also, any and all feedback is welcome.</p>

<p>Many thanks to Sankara Narayanan for proof reading.</p>
]]></content>
  </entry>
  
</feed>
